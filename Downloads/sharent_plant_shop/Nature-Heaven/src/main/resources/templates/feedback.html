<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>Feedback</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="" name="keywords" />
    <meta content="" name="description" />

    <!-- Favicon -->
    <link href="/img/favicon.ico" rel="icon" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet" />
    <!-- Handwritten Font -->
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;500;600;700&display=swap" rel="stylesheet" />

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Libraries Stylesheet -->
    <link href="/lib/animate/animate.min.css" rel="stylesheet" />
    <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />
    <link href="/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Template Stylesheet -->
    <link href="/css/style.css" rel="stylesheet" />

    <!-- Custom Styles for Feedback Page -->
    <style>
    .feedback-container {
      max-width: 1200px;
      margin: 0 auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feedback-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }

    .star-rating {
      font-size: 24px;
      color: #ccc; /* Default star color */
      cursor: pointer;
    }

    .star-rating .star {
      transition: color 0.2s, transform 0.2s;
    }

    .star-rating .star:hover {
      color: #ffcc00;
      transform: scale(1.2);
    }

    .star-rating .star.active {
      color: #ffcc00;
      transform: scale(1.2);
    }

    .feedback-box {
      border: 1px solid #ddd;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      background: #f9f9f9;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.5s ease forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      resize: vertical;
    }

    button {
      background: linear-gradient(135deg, #28a745, #218838);
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    /* Feedback Display Section */
    .feedback-display {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 40px;
    }

    .feedback-card {
      flex: 1 1 calc(33.333% - 20px);
      background: #e8f5e9; /* Light green background */
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      font-family: 'Caveat', cursive; /* Handwritten font */
      font-size: 1.2rem;
      color: #2e7d32; /* Dark green text */
      position: relative;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feedback-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .feedback-card::before {
      content: '“';
      font-size: 3rem;
      color: #66bb6a; /* Light green quote mark */
      position: absolute;
      top: -10px;
      left: 10px;
    }

    .feedback-card::after {
      content: '”';
      font-size: 3rem;
      color: #66bb6a; /* Light green quote mark */
      position: absolute;
      bottom: -20px;
      right: 10px;
    }

    .feedback-card p {
      margin: 0;
    }

    .feedback-card .rating {
      font-size: 1rem;
      color: #ffcc00; /* Star color */
      margin-top: 10px;
    }

    .feedback-card .user {
      font-size: 1rem;
      color: #666;
      margin-top: 10px;
      font-style: italic;
    }
  </style>
</head>
<body>
<!-- Navbar Start -->
<nav class="navbar navbar-expand-lg bg-white navbar-light sticky-top p-0">
    <a href="#" class="navbar-brand d-flex align-items-center px-4 px-lg-5">
        <h1 class="m-0">Gardener</h1>
    </a>
    <button type="button" class="navbar-toggler me-4" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
        <div class="navbar-nav ms-auto p-4 p-lg-0">
            <a th:href="@{/auth/register}" class="nav-item nav-link">Register</a>
            <a th:href="@{/auth/login}" class="nav-item nav-link">Login</a>
            <a th:href="@{/index}" class="nav-item nav-link">Home</a>
            <a th:href="@{/about}" class="nav-item nav-link">About</a>
            <a th:href="@{/service}" class="nav-item nav-link">Services</a>
            <a th:href="@{/project}" class="nav-item nav-link">Projects</a>
            <div class="nav-item dropdown">
                <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                <div class="dropdown-menu bg-light m-0">
                    <a th:href="@{/feature}" class="dropdown-item">Features</a>
                    <a th:href="@{/quote}" class="dropdown-item">Free Quote</a>
                    <a th:href="@{/team}" class="dropdown-item">Our Team</a>
                    <a th:href="@{/testimonial}" class="dropdown-item">Testimonial</a>
                    <a th:href="@{/api/plants/}" class="dropdown-item">Plants</a>
                    <a th:href="@{/api/categories/}" class="dropdown-item">Shop By Categories</a>
                </div>
            </div>
            <a th:href="@{/contact}" class="nav-item nav-link">Contact</a>
        </div>
        <a th:href="@{/feedback/}" class="btn btn-primary py-4 px-lg-4 rounded-0 d-none d-lg-block">FeedBack<i class="fa fa-arrow-right ms-3"></i></a>
    </div>
</nav>
<!-- Navbar End -->

<!-- Page Header Start -->
<div class="container-fluid page-header py-5 mb-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container text-center py-5">
        <h1 class="display-3 text-white mb-4 animated slideInDown">Feedback</h1>
        <nav aria-label="breadcrumb animated slideInDown">
            <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Feedback</li>
            </ol>
        </nav>
    </div>
</div>
<!-- Page Header End -->

<!-- Feedback Section Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="feedback-container">
            <h1 class="text-center mb-5">We Value Your Feedback</h1>

            <!-- Feedback Form -->
            <form th:action="@{/feedback}" th:object="${feedback}" method="post" class="feedback-form">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <div class="mb-4">
                    <label for="ratingInput" class="form-label">Rating:</label>
                    <div class="star-rating" id="starRating">
                        <span class="star" data-value="1">&#9733;</span>
                        <span class="star" data-value="2">&#9733;</span>
                        <span class="star" data-value="3">&#9733;</span>
                        <span class="star" data-value="4">&#9733;</span>
                        <span class="star" data-value="5">&#9733;</span>
                    </div>
                    <input type="hidden" id="ratingInput" name="rating" th:field="*{rating}" />
                </div>
                <div class="mb-4">
                    <label for="messageInput" class="form-label">Message:</label>
                    <textarea id="messageInput" name="message" th:field="*{message}" rows="4" placeholder="Write your feedback here..." class="form-control"></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">Submit Feedback</button>
            </form>

            <!-- Display Feedback -->
            <h2 class="text-center mt-5">Feedback List</h2>
            <div class="feedback-display">
                <div th:each="fb : ${allFeedback}" class="feedback-card">
                    <p th:text="${fb.message}"></p>
                    <div class="rating">
            <span th:each="i : ${#numbers.sequence(1, 5)}">
              <i class="fa fa-star" th:classappend="${i <= fb.rating} ? 'active' : ''"></i>
            </span>
                    </div>
                    <p class="user" th:if="${fb.user != null}" th:text="'Submitted by: ' + ${fb.user.username}"></p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Feedback Section End -->

<!-- Footer Start -->
<div class="container-fluid bg-dark text-light footer mt-5 py-5 wow fadeIn" data-wow-delay="0.1s">
    <div class="container py-5">
        <div class="row g-5">
            <div class="col-lg-3 col-md-6">
                <h4 class="text-white mb-4">Our Office</h4>
                <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, New York, USA</p>
                <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@example.com</p>
                <div class="d-flex pt-2">
                    <a class="btn btn-square btn-outline-light rounded-circle me-2" href="@{https://twitter.com}"><i class="fab fa-twitter"></i></a>
                    <a class="btn btn-square btn-outline-light rounded-circle me-2" href="@{https://facebook.com}"><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-square btn-outline-light rounded-circle me-2" href="@{https://youtube.com}"><i class="fab fa-youtube"></i></a>
                    <a class="btn btn-square btn-outline-light rounded-circle me-2" href="@{https://linkedin.com}"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <h4 class="text-white mb-4">Services</h4>
                <a class="btn btn-link" href="">Landscaping</a>
                <a class="btn btn-link" href="">Pruning plants</a>
                <a class="btn btn-link" href="">Urban Gardening</a>
                <a class="btn btn-link" href="">Garden Maintenance</a>
                <a class="btn btn-link" href="">Green Technology</a>
            </div>
            <div class="col-lg-3 col-md-6">
                <h4 class="text-white mb-4">Quick Links</h4>
                <a class="btn btn-link" href="">About Us</a>
                <a class="btn btn-link" href="">Contact Us</a>
                <a class="btn btn-link" href="">Our Services</a>
                <a class="btn btn-link" href="">Terms & Condition</a>
                <a class="btn btn-link" href="">Support</a>
            </div>
            <div class="col-lg-3 col-md-6">
                <h4 class="text-white mb-4">Newsletter</h4>
                <p>Dolor amet sit justo amet elitr clita ipsum elitr est.</p>
                <div class="position-relative w-100">
                    <input class="form-control bg-light border-light w-100 py-3 ps-4 pe-5" type="text" placeholder="Your email">
                    <button type="button" class="btn btn-primary py-2 position-absolute top-0 end-0 mt-2 me-2">SignUp</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Footer End -->

<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square rounded-circle back-to-top" th:href="@{#}">
    <i class="bi bi-arrow-up"></i>
</a>

<!-- JavaScript Libraries -->
<script th:src="@{https://code.jquery.com/jquery-3.4.1.min.js}"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/lib/wow/wow.min.js}"></script>
<script th:src="@{/lib/easing/easing.min.js}"></script>
<script th:src="@{/lib/waypoints/waypoints.min.js}"></script>
<script th:src="@{/lib/owlcarousel/owl.carousel.min.js}"></script>
<script th:src="@{/lib/counterup/counterup.min.js}"></script>
<script th:src="@{/lib/parallax/parallax.min.js}"></script>
<script th:src="@{/lib/isotope/isotope.pkgd.min.js}"></script>
<script th:src="@{/lib/lightbox/js/lightbox.min.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>

<!-- Template Javascript -->
<script th:src="@{/js/main.js}"></script>

<!-- Custom JavaScript for Star Rating -->
<script>
  function initializeStarRating() {
    const stars = document.querySelectorAll('.star-rating .star');
    const ratingInput = document.getElementById('ratingInput');

    stars.forEach(star => {
      star.addEventListener('click', () => {
        const value = star.getAttribute('data-value');
        ratingInput.value = value;

        stars.forEach((s) => {
          if (s.getAttribute('data-value') <= value) {
            s.classList.add('active');
          } else {
            s.classList.remove('active');
          }
        });
      });
    });

    const initialRating = ratingInput.value;
    if (initialRating) {
      stars.forEach((s) => {
        if (s.getAttribute('data-value') <= initialRating) {
          s.classList.add('active');
        }
      });
    }
  }

  document.addEventListener('DOMContentLoaded', initializeStarRating);
</script>
</body>
</html>